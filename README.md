# FileServeApp

ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„Androidæª”æ¡ˆä¼ºæœå™¨æ‡‰ç”¨ï¼Œè®“æ‚¨å¯ä»¥é€éå€åŸŸç¶²è·¯çš„ç¶²é ç€è¦½å™¨è¼•é¬†ç®¡ç†æ‰‹æ©Ÿä¸­çš„æª”æ¡ˆã€‚

## ğŸ¯ å°ˆæ¡ˆç°¡ä»‹

é€™æ˜¯ä¸€å€‹åŸºæ–¼React Nativeé–‹ç™¼çš„Androidæ‡‰ç”¨ç¨‹å¼ï¼Œå…§å»ºHTTPä¼ºæœå™¨ï¼Œæä¾›ç¶²é å¼æª”æ¡ˆç®¡ç†ä»‹é¢ã€‚æ‚¨å¯ä»¥åœ¨é›»è…¦ç€è¦½å™¨ä¸­é€éç°¡å–®çš„æ“ä½œä»‹é¢ä¾†ç€è¦½ã€ä¸Šå‚³ã€ä¸‹è¼‰ã€åˆªé™¤å’Œé‡æ–°å‘½åæ‰‹æ©Ÿä¸­çš„æª”æ¡ˆã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### Appç«¯åŠŸèƒ½
- ğŸš€ ä¸€éµå•Ÿå‹•/åœæ­¢æª”æ¡ˆä¼ºæœå™¨
- ğŸ“Š å³æ™‚é¡¯ç¤ºä¼ºæœå™¨ç‹€æ…‹å’Œé€£ç·šè³‡è¨Š
- ğŸ“ å®Œæ•´çš„æ“ä½œæ—¥èªŒè¨˜éŒ„
- ğŸ“… æŒ‰æ—¥æœŸæŸ¥çœ‹æ­·å²æ—¥èªŒ
- ğŸ”„ è‡ªå‹•è¨˜éŒ„æ‰€æœ‰CRUDæ“ä½œ

### Webç«¯åŠŸèƒ½
- ğŸ“ æª”æ¡ˆç¸½ç®¡é¢¨æ ¼çš„ä»‹é¢è¨­è¨ˆ
- â¬†ï¸ æ”¯æ´æ‹–æ‹‰ä¸Šå‚³æª”æ¡ˆ
- ğŸ“¤ æ‰¹æ¬¡æª”æ¡ˆä¸Šå‚³
- ğŸ“¥ ç›´æ¥ä¸‹è¼‰æª”æ¡ˆ
- ğŸ—‘ï¸ åˆªé™¤æª”æ¡ˆå’Œè³‡æ–™å¤¾
- âœï¸ é‡æ–°å‘½åæª”æ¡ˆ/è³‡æ–™å¤¾
- â• å»ºç«‹æ–°è³‡æ–™å¤¾
- ğŸ”™ å¿«é€Ÿå°èˆªåˆ°ä¸Šå±¤ç›®éŒ„

## ğŸ› ï¸ æŠ€è¡“æ£§

- **æ¡†æ¶**: React Native 0.83
- **èªè¨€**: TypeScript, Kotlin
- **HTTPä¼ºæœå™¨**: NanoHTTPD 2.3.1
- **åŸç”Ÿæ•´åˆ**: Native Modules
- **å‰ç«¯**: HTML5, CSS3, JavaScript

## ğŸ“¦ å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚
- Node.js >= 20
- Android Studio
- React Nativeé–‹ç™¼ç’°å¢ƒ
- JDK

### é–‹ç™¼ç’°å¢ƒè¨­ç½®ï¼ˆä½¿ç”¨Dockerï¼‰

```bash
docker run --name my-abb --rm -it -v /"$PWD:/app" -w //app beevelop/android:v2025.08.1 bash
```

åœ¨Dockerå®¹å™¨ä¸­è¨­ç½®ç’°å¢ƒï¼š

```bash
apt-get update
apt-get install -y curl ca-certificates

curl -fsSL https://deb.nodesource.com/setup_lts.x | bash -
apt-get install -y nodejs

node -v
npm -v

yes | /opt/android/cmdline-tools/latest/bin/sdkmanager --sdk_root=/opt/android --licenses
/opt/android/cmdline-tools/latest/bin/sdkmanager --sdk_root=/opt/android "ndk;27.1.12297006"
```

### ç·¨è­¯æ‡‰ç”¨

```bash
cd MyApp
npm install
cd android
./gradlew assembleRelease
```

ç·¨è­¯å®Œæˆçš„APKä½æ–¼ï¼š`MyApp/android/app/build/outputs/apk/release/app-release.apk`

## ğŸš€ ä½¿ç”¨æ–¹æ³•

1. åœ¨æ‰‹æ©Ÿä¸Šå®‰è£ä¸¦é–‹å•ŸApp
2. é»æ“Šã€Œâ–¶ï¸ é–‹å§‹æœå‹™ã€æŒ‰éˆ•
3. æˆäºˆå¿…è¦çš„æª”æ¡ˆå­˜å–æ¬Šé™ï¼ˆåŒ…æ‹¬ã€Œæ‰€æœ‰æª”æ¡ˆå­˜å–æ¬Šé™ã€ï¼‰
4. è¨˜ä¸‹é¡¯ç¤ºçš„ä¼ºæœå™¨URLï¼ˆä¾‹å¦‚ï¼š`http://192.168.1.100:8080`ï¼‰
5. åœ¨åŒä¸€ç¶²è·¯çš„é›»è…¦ç€è¦½å™¨ä¸­é–‹å•Ÿè©²URL
6. é–‹å§‹ç®¡ç†æ‚¨çš„æ‰‹æ©Ÿæª”æ¡ˆï¼

## ğŸ“¸ åŠŸèƒ½æˆªåœ–

### Appç•Œé¢
- ç°¡æ½”çš„æ§åˆ¶é¢æ¿
- å³æ™‚ç‹€æ…‹æŒ‡ç¤ºç‡ˆ
- æ¸…æ™°çš„æ“ä½œæ—¥èªŒé¡¯ç¤º
- æ—¥æœŸé¸æ“‡å™¨

### Webç•Œé¢
- é¡ä¼¼Windowsæª”æ¡ˆç¸½ç®¡çš„æ“ä½œé«”é©—
- ç›´è¦ºçš„æª”æ¡ˆåˆ—è¡¨
- ä¾¿æ·çš„å·¥å…·åˆ—
- æ‹–æ‹‰ä¸Šå‚³å€åŸŸ

## ğŸ” æ¬Šé™èªªæ˜

æ­¤æ‡‰ç”¨éœ€è¦ä»¥ä¸‹Androidæ¬Šé™ï¼š
- `INTERNET` - ç¶²è·¯é€šè¨Š
- `READ_EXTERNAL_STORAGE` - è®€å–å„²å­˜ç©ºé–“
- `WRITE_EXTERNAL_STORAGE` - å¯«å…¥å„²å­˜ç©ºé–“
- `MANAGE_EXTERNAL_STORAGE` - å®Œæ•´æª”æ¡ˆå­˜å–ï¼ˆAndroid 11+ï¼‰
- `ACCESS_NETWORK_STATE` - ç¶²è·¯ç‹€æ…‹
- `ACCESS_WIFI_STATE` - Wi-Fiç‹€æ…‹

## ğŸ“‹ APIæ–‡ä»¶

### åˆ—å‡ºæª”æ¡ˆ
```
GET /api/list?path=<è·¯å¾‘>
```

### ä¸‹è¼‰æª”æ¡ˆ
```
GET /api/get?path=<æª”æ¡ˆè·¯å¾‘>
```

### ä¸Šå‚³æª”æ¡ˆ
```
POST /api/upload
Content-Type: multipart/form-data
Body: file=<æª”æ¡ˆ>, path=<ç›®æ¨™è·¯å¾‘>
```

### åˆªé™¤æª”æ¡ˆ/è³‡æ–™å¤¾
```
DELETE /api/delete?path=<è·¯å¾‘>
```

### é‡æ–°å‘½å
```
POST /api/rename
Content-Type: application/json
Body: {"oldPath": "<èˆŠè·¯å¾‘>", "newName": "<æ–°åç¨±>"}
```

### å»ºç«‹è³‡æ–™å¤¾
```
POST /api/mkdir
Content-Type: application/json
Body: {"path": "<çˆ¶è·¯å¾‘>", "name": "<è³‡æ–™å¤¾åç¨±>"}
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
FileServeApp/
â”œâ”€â”€ MyApp/
â”‚   â”œâ”€â”€ App.tsx                          # React Nativeä¸»æ‡‰ç”¨
â”‚   â”œâ”€â”€ android/
â”‚   â”‚   â””â”€â”€ app/src/main/java/com/myapp/
â”‚   â”‚       â”œâ”€â”€ FileServerModule.kt      # HTTPä¼ºæœå™¨å¯¦ä½œ
â”‚   â”‚       â”œâ”€â”€ FileServerPackage.kt     # RNæ¨¡çµ„è¨»å†Š
â”‚   â”‚       â”œâ”€â”€ MainActivity.kt
â”‚   â”‚       â””â”€â”€ MainApplication.kt
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ README_APP.md                    # æ‡‰ç”¨è©³ç´°èªªæ˜
â””â”€â”€ README.md                            # æœ¬æª”æ¡ˆ
```

## ğŸ”§ è‡ªè¨‚è¨­å®š

### ä¿®æ”¹ä¼ºæœå™¨ç«¯å£
ç·¨è¼¯ [MyApp/App.tsx](MyApp/App.tsx):
```typescript
const result = await FileServer.startServer(8080); // æ”¹ç‚ºæ‚¨æƒ³è¦çš„ç«¯å£
```

### ä¿®æ”¹æ ¹ç›®éŒ„
ç·¨è¼¯ [FileServerModule.kt](MyApp/android/app/src/main/java/com/myapp/FileServerModule.kt):
```kotlin
private val baseDir: File = Environment.getExternalStorageDirectory()
```

## âš ï¸ å®‰å…¨é ˆçŸ¥

- âš ï¸ æ­¤æ‡‰ç”¨**åƒ…ä¾›å€åŸŸç¶²è·¯ä½¿ç”¨**
- âš ï¸ **ç„¡èº«ä»½é©—è­‰æ©Ÿåˆ¶**ï¼ŒåŒç¶²è·¯çš„ä»»ä½•äººéƒ½å¯å­˜å–
- âš ï¸ ä¸å»ºè­°åœ¨å…¬å…±Wi-Fiç’°å¢ƒä½¿ç”¨
- âš ï¸ ä½¿ç”¨å®Œç•¢è«‹è¨˜å¾—åœæ­¢æœå‹™
- âš ï¸ æ•æ„Ÿæª”æ¡ˆè«‹è¬¹æ…è™•ç†

## ğŸ› å¸¸è¦‹å•é¡Œ

### ç„¡æ³•é€£æ¥ä¼ºæœå™¨
- ç¢ºèªæ‰‹æ©Ÿå’Œé›»è…¦åœ¨åŒä¸€Wi-Fiç¶²è·¯
- æª¢æŸ¥é˜²ç«ç‰†è¨­å®š
- ç¢ºèªé¡¯ç¤ºçš„IPä½å€æ­£ç¢º

### æª”æ¡ˆæ¬Šé™å•é¡Œ
- Android 11+éœ€æ‰‹å‹•åœ¨è¨­å®šä¸­å•Ÿç”¨ã€Œæ‰€æœ‰æª”æ¡ˆå­˜å–æ¬Šé™ã€
- è·¯å¾‘ï¼šè¨­å®š â†’ æ‡‰ç”¨ç¨‹å¼ â†’ MyApp â†’ æ¬Šé™ â†’ æª”æ¡ˆå’Œåª’é«”

### ä¸Šå‚³å¤±æ•—
- æª¢æŸ¥å„²å­˜ç©ºé–“æ˜¯å¦è¶³å¤ 
- ç¢ºèªç›®æ¨™è³‡æ–™å¤¾æœ‰å¯«å…¥æ¬Šé™
- æª”æ¡ˆåç¨±é¿å…ç‰¹æ®Šå­—å…ƒ

## ğŸš€ æœªä¾†è¨ˆåŠƒ

- [ ] æ–°å¢ä½¿ç”¨è€…èªè­‰æ©Ÿåˆ¶
- [ ] æ”¯æ´HTTPSåŠ å¯†å‚³è¼¸
- [ ] æª”æ¡ˆé è¦½åŠŸèƒ½
- [ ] æ‰¹æ¬¡æ“ä½œï¼ˆè¤‡è£½ã€ç§»å‹•ï¼‰
- [ ] æœå°‹æª”æ¡ˆåŠŸèƒ½
- [ ] æª”æ¡ˆå£“ç¸®/è§£å£“ç¸®
- [ ] iOSæ”¯æ´

## ğŸ“„ æˆæ¬Š

MIT License

## ğŸ‘¨â€ğŸ’» é–‹ç™¼è€…

é–‹ç™¼å•é¡Œæˆ–å»ºè­°æ­¡è¿æäº¤Issueæˆ–Pull Requestã€‚

## ğŸ™ è‡´è¬

- [React Native](https://reactnative.dev/)
- [NanoHTTPD](https://github.com/NanoHttpd/nanohttpd)
- Androidé–‹ç™¼ç¤¾ç¾¤

---

**æ³¨æ„**ï¼šæ­¤æ‡‰ç”¨ç‚ºæ•™è‚²å’Œå€‹äººä½¿ç”¨ç›®çš„é–‹ç™¼ï¼Œè«‹éµå®ˆç›¸é—œæ³•å¾‹æ³•è¦ï¼Œå¦¥å–„ä¿è­·å€‹äººéš±ç§å’Œè³‡æ–™å®‰å…¨ã€‚
